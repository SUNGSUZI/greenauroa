insert station(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	327		 낙원상가 옆		서울특별시 종로구 삼일대로 428 낙원상가 옆	,	37.57335663	,	126.9874649	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(327 낙원상가 옆서울특별시 종로구 삼일대로 428 낙원상가 옆,37.57335663,126.9874649,42284,A');
insert station(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	328		 탑골공원 앞		서울특별시 종로구 종로 99 탑골공원 앞	,	37.57039642	,	126.9881897	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(328 탑골공원 앞서울특별시 종로구 종로 99 탑골공원 앞,37.57039642,126.9881897,42284,A');
insert station(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	329		 청계2가 사거리 옆		서울특별시 종로구 청계천로 93 파고다타워	,	37.56848526	,	126.9878845	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(329 청계2가 사거리 옆서울특별시 종로구 청계천로 93 파고다타워,37.56848526,126.9878845,42284,A');
insert station(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	334		 종로3가역 2번출구 뒤		서울특별시 종로구 종로 지하129 종로3가역 2번출구 뒤	,	37.5705986	,	126.9917908	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(334 종로3가역 2번출구 뒤서울특별시 종로구 종로 지하129 종로3가역 2번출구 뒤,37.5705986,126.9917908,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	335		 종로3가역 15번출구 앞		서울특별시 종로구 종로 지하129 15번출구 앞	,	37.57019424	,	126.9916534	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(335 종로3가역 15번출구 앞서울특별시 종로구 종로 지하129 15번출구 앞,37.57019424,126.9916534,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	337		 창경궁 입구		서울특별시 종로구 창경궁로 185 창경궁 입구	,	37.57897949	,	126.9964752	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(337 창경궁 입구서울특별시 종로구 창경궁로 185 창경궁 입구,37.57897949,126.9964752,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	338		세운스퀘어 앞		서울특별시 종로구 창경궁로 109 세운스퀘어 앞	,	37.57095718	,	126.9971237	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(338세운스퀘어 앞서울특별시 종로구 창경궁로 109 세운스퀘어 앞,37.57095718,126.9971237,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	339		 종로4가 사거리		서울특별시 종로구 종로 185 종로4가 사거리	,	37.57106781	,	126.9981918	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(339 종로4가 사거리서울특별시 종로구 종로 185 종로4가 사거리,37.57106781,126.9981918,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	340		 혜화동 로터리		서울특별시 종로구 창경궁로 271-1 혜화동 로터리	,	37.58562851	,	127.000679	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(340 혜화동 로터리서울특별시 종로구 창경궁로 271-1 혜화동 로터리,37.58562851,127.000679,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	341		 혜화역 3번출구 뒤		서울특별시 종로구 대학로 지하120 혜화역 3번출구 뒤	,	37.58156967	,	127.0017853	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(341 혜화역 3번출구 뒤서울특별시 종로구 대학로 지하120 혜화역 3번출구 뒤,37.58156967,127.0017853,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	342		 대학로 마로니에공원		서울특별시 종로구 대학로 104 대학로 마로니에공원	,	37.57978439	,	127.002533	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(342 대학로 마로니에공원서울특별시 종로구 대학로 104 대학로 마로니에공원,37.57978439,127.002533,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	343		힐스테이트창경궁 아파트 앞		서울특별시 종로구 충신동 60	,	37.57561111	,	127.0046997	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(343힐스테이트창경궁 아파트 앞서울특별시 종로구 충신동 60,37.57561111,127.0046997,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	344		 성균관대 E하우스 앞		서울특별시 종로구 율곡로 259 성균관대 E하우스 앞	,	37.57419968	,	127.0065918	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(344 성균관대 E하우스 앞서울특별시 종로구 율곡로 259 성균관대 E하우스 앞,37.57419968,127.0065918,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	345		 서울보증보험본사 앞		서울특별시 종로구 김상옥로 29 서울보증보험본사 앞	,	37.57330704	,	127.0007095	,	2015-10-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(345 서울보증보험본사 앞서울특별시 종로구 김상옥로 29 서울보증보험본사 앞,37.57330704,127.0007095,42284,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	348		 독립문역 사거리		서울특별시 종로구 교북동 10-1 독립문역 사거리	,	37.57202911	,	126.9607849	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(348 독립문역 사거리서울특별시 종로구 교북동 10-1 독립문역 사거리,37.57202911,126.9607849,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	349		어린이도서관		서울특별시 종로구 사직로9길 5 사직동주민센터	,	37.57633209	,	126.9685898	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(349어린이도서관서울특별시 종로구 사직로9길 5 사직동주민센터,37.57633209,126.9685898,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	351		 청운초교 앞 삼거리		서울특별시 종로구 청운동 108-22 청운초교 앞 삼거리	,	37.58496857	,	126.9704132	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(351 청운초교 앞 삼거리서울특별시 종로구 청운동 108-22 청운초교 앞 삼거리,37.58496857,126.9704132,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	352		 중앙고입구 삼거리		서울특별시 종로구 창덕궁길 191 중앙고입구 삼거리	,	37.58341599	,	126.9852371	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(352 중앙고입구 삼거리서울특별시 종로구 창덕궁길 191 중앙고입구 삼거리,37.58341599,126.9852371,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	353		 재동초교 앞 삼거리		서울특별시 종로구 재동 19 재동초교 앞 삼거리	,	37.57938766	,	126.9849472	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(353 재동초교 앞 삼거리서울특별시 종로구 재동 19 재동초교 앞 삼거리,37.57938766,126.9849472,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	354		 포르투갈 대사관 앞		서울특별시 종로구 창덕궁1길 3 포르투갈 대사관 앞	,	37.57915497	,	126.9889603	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(354 포르투갈 대사관 앞서울특별시 종로구 창덕궁1길 3 포르투갈 대사관 앞,37.57915497,126.9889603,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	355		서울사대부설초등학교 앞		서울특별시 종로구 연건동 178-3 서울사대부속초교 앞	,	37.57650757	,	127.0024567	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(355서울사대부설초등학교 앞서울특별시 종로구 연건동 178-3 서울사대부속초교 앞,37.57650757,127.0024567,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	356		 KT혜화지사 앞		서울특별시 종로구 대학로 65 KT혜화지사 앞	,	37.57714462	,	127.0020599	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(356 KT혜화지사 앞서울특별시 종로구 대학로 65 KT혜화지사 앞,37.57714462,127.0020599,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	358		성균관대입구 사거리 A		서울특별시 종로구 창경궁로 234 성대입구 사거리	,	37.58250046	,	126.9985352	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(358성균관대입구 사거리 A서울특별시 종로구 창경궁로 234 성대입구 사거리,37.58250046,126.9985352,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	359		 원남동사거리		서울특별시 종로구 율곡로 169 원남동사거리	,	37.57606125	,	126.9976807	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(359 원남동사거리서울특별시 종로구 율곡로 169 원남동사거리,37.57606125,126.9976807,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	361		 동묘앞역 1번출구 뒤		서울특별시 종로구 숭인동 81-39 동묘앞역 1번출구 뒤	,	37.57324219	,	127.0159073	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(361 동묘앞역 1번출구 뒤서울특별시 종로구 숭인동 81-39 동묘앞역 1번출구 뒤,37.57324219,127.0159073,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	362		 청계8가 사거리 A		서울특별시 종로구 청계천로 407 청계8가 사거리	,	37.57219696	,	127.0230408	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(362 청계8가 사거리 A서울특별시 종로구 청계천로 407 청계8가 사거리,37.57219696,127.0230408,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	363		 신설동역 11번출구 뒤		서울특별시 종로구 종로 411-3 가로판매	,	37.57559204	,	127.02285	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(363 신설동역 11번출구 뒤서울특별시 종로구 종로 411-3 가로판매,37.57559204,127.02285,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	364		 창신역 1번출구 앞		서울특별시 종로구 지봉로 87 창신역 1번출구 앞	,	37.57933426	,	127.0150833	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(364 창신역 1번출구 앞서울특별시 종로구 지봉로 87 창신역 1번출구 앞,37.57933426,127.0150833,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	367		 독립문역 3-1번출구		서울특별시 종로구 무악동 41-7 독립문역 3번출구 뒤	,	37.57415771	,	126.958519	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(367 독립문역 3-1번출구서울특별시 종로구 무악동 41-7 독립문역 3번출구 뒤,37.57415771,126.958519,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	368		 SK 서린빌딩 앞		서울특별시 종로구 서린동 93-2 SK 서린빌딩 앞	,	37.5692482	,	126.9805374	,	2016-06-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(368 SK 서린빌딩 앞서울특별시 종로구 서린동 93-2 SK 서린빌딩 앞,37.5692482,126.9805374,42522,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	385		 종각역 5번출구		서울특별시 종로구 서린동 26-1 종각역 5번출구	,	37.56983566	,	126.9826584	,	2016-07-06	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(385 종각역 5번출구서울특별시 종로구 서린동 26-1 종각역 5번출구,37.56983566,126.9826584,42557,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	388		 동성중학교 앞		서울특별시 종로구 혜화동 56 동성중학교 앞	,	37.58573532	,	127.0016098	,	2016-09-02	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(388 동성중학교 앞서울특별시 종로구 혜화동 56 동성중학교 앞,37.58573532,127.0016098,42615,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	393		 동대문역 8번 출구		서울특별시 종로구 율곡로 지하 308 동대문역 8번출구	,	37.57014084	,	127.0093765	,	2018-01-26	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(393 동대문역 8번 출구서울특별시 종로구 율곡로 지하 308 동대문역 8번출구,37.57014084,127.0093765,43126,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	394		 경희궁 자이 3단지		서울특별시 종로구 경교장길 35 경희궁자이 3단지	,	37.56748962	,	126.9659195	,	2018-01-26	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(394 경희궁 자이 3단지서울특별시 종로구 경교장길 35 경희궁자이 3단지,37.56748962,126.9659195,43126,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	395		 경희궁 자이 2단지		서울특별시 종로구 송월길 99 경희궁 자이 3단지	,	37.56885529	,	126.9645615	,	2018-01-26	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(395 경희궁 자이 2단지서울특별시 종로구 송월길 99 경희궁 자이 3단지,37.56885529,126.9645615,43126,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	397		 종묘공영주차장 건너편		서울특별시 종로구 종로 지하 200 종묘공영주차장 건너편	,	37.57048035	,	126.9966354	,	2018-04-30	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(397 종묘공영주차장 건너편서울특별시 종로구 종로 지하 200 종묘공영주차장 건너편,37.57048035,126.9966354,43220,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	446		 상명대입구		서울특별시 종로구 홍지문길 1 상명대 입구	,	37.60012817	,	126.9578323	,	2017-08-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(446 상명대입구서울특별시 종로구 홍지문길 1 상명대 입구,37.60012817,126.9578323,42948,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	447		 신영동삼거리		서울특별시 종로구 진흥로 499 신영동 삼거리	,	37.60399246	,	126.9619446	,	2017-08-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(447 신영동삼거리서울특별시 종로구 진흥로 499 신영동 삼거리,37.60399246,126.9619446,42948,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	449		 일성아파트		서울특별시 종로구 평창문화로 119 일성아파트	,	37.60871887	,	126.9728622	,	2017-08-01	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(449 일성아파트서울특별시 종로구 평창문화로 119 일성아파트,37.60871887,126.9728622,42948,A');
insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(	450		 효자동 삼거리		서울특별시 종로구 효자로13길 45 종로구 궁정동 98-2	,	37.58360291	,	126.9725494	,	2017-09-07	,	A');	insert staion(station_number, station_name,address, station_lat, station_log, station_create_date, state) values(450 효자동 삼거리서울특별시 종로구 효자로13길 45 종로구 궁정동 98-2,37.58360291,126.9725494,42985,A');
-- 50행까지
insert bicycle

select * from member;
ALTER TABLE bookmark DROP FOREIGN KEY FK_member_TO_bookmark_1;
ALTER TABLE notification DROP FOREIGN KEY FK_member_TO_notification_1;
DROP TABLE IF EXISTS member;
CREATE TABLE `member` (
    `id` bigint NOT NULL AUTO_INCREMENT,
    `member_id` varchar(100) NOT NULL UNIQUE,
    `member_pass` int NOT NULL,
    `member_name` varchar(30) NOT NULL,
    `member_phone` int NOT NULL,
    `member_number` BIGINT NOT NULL,
    `member_email` varchar(100) NOT NULL,
    `member_address` varchar(100) NULL,
    `member_create_date` date NULL,
    `member_withdraw_date` date NULL,
    `member_state` char(5) NULL COMMENT '정상 : A 탈퇴: D 휴먼:B',
    `role` varchar(30) NULL COMMENT '사용자 :ROLE_USER 관리자:ROLE_ADMIN',
    PRIMARY KEY (`id`)
);
ALTER TABLE bookmark 
ADD CONSTRAINT FK_member_TO_bookmark_1 
FOREIGN KEY (member_id) 
REFERENCES member(member_id);

ALTER TABLE `notification` ADD CONSTRAINT `FK_member_TO_notification_1` FOREIGN KEY (
   `member_id`
)
REFERENCES `member` (
   `member_id`
);
--
ALTER TABLE `board_group` ADD CONSTRAINT `PK_BOARD_GROUP` PRIMARY KEY (
	`board_group_key`
);

ALTER TABLE `board` ADD CONSTRAINT `FK_board_TO_board_group_1` FOREIGN KEY (
	`board_group_key`
)
REFERENCES `board_group` (
	`board_group_key`
);


select * from 
-- station_group_bicycle 테이블 updated 컬럼 추가

ALTER TABLE station_group_bicycle
ADD COLUMN rev_update_dt DATETIME;



--reservation 테이블 bicycle_type컬럼 추가

ALTER TABLE reservation
ADD COLUMN bicycle_type varchar(30);


--SET GLOBAL transaction_isolation = 'SERIALIZABLE';

ALTER TABLE reservation
MODIFY COLUMN rev_end_time date NULL;

ALTER TABLE `reservation` ADD CONSTRAINT `PK_RESERVATION` PRIMARY KEY (
	`rev_key`
);

-- bicycle 자료형 변경
ALTER TABLE rental
MODIFY COLUMN bicycle_number VARCHAR(100);

ALTER TABLE station_group_bicycle
MODIFY COLUMN bicycle_number VARCHAR(100);

-- reservation 예약키 데이터형 변환
ALTER TABLE reservation
MODIFY COLUMN rev_key BIGINT AUTO_INCREMENT;

ALTER TABLE reservation_cancel
MODIFY COLUMN rev_key BIGINT;

-- 데이터 타입 확인
DESCRIBE rental;

SET foreign_key_checks = 1; -- 외래키 잠깐 잠구기


-- 경도값, 위도 uniqe 삭제
DROP INDEX UKbi8vxkmnjut7u4u27ahr5get0 ON station_info;
DROP INDEX UK5n9yhia941pj9o2byxb857irv ON station_info;
DROP INDEX UKkcuk3alrstmb0rivfqbwaiqpg ON station_info;


-- 제약조건 조회
SELECT 
    CONSTRAINT_NAME, 
    CONSTRAINT_TYPE, 
    TABLE_NAME 
FROM 
    INFORMATION_SCHEMA.TABLE_CONSTRAINTS
WHERE 
    TABLE_NAME = 'station_info';
    
-- board group, 첨부파일 group 삭제 및 board column 변경
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'greenaoura';
drop table attach_group;


ALTER TABLE board DROP FOREIGN KEY FK_board_TO_board_group_1;
drop table board_group;
DESCRIBE board;

drop table board;
drop table attach_file;



CREATE TABLE `board` (
	`board_key`	varchar(100)	NOT NULL,
	`member_id`	varchar(100)	NOT NULL	COMMENT '작성자',
	`category`	varchar(100)	NULL	COMMENT '문의사항: 문의사항, 공지사항: 공지사항',
	`title`	text	NOT NULL,
	`sub`	varchar(100)	NULL,
	`contents`	text	NULL,
	`create_dt`	datetime	NOT NULL,
	`delete_dt`	datetime,
	`secret`	char(2)	NULL	COMMENT 'Y: 비공개, N: 공개'
);

ALTER TABLE `board` ADD CONSTRAINT `PK_BOARD` PRIMARY KEY (
	`board_key`
);

CREATE TABLE `attach_file` (
	`attach_file_id`	varchar(100)	NOT NULL,
	`board_key`	varchar(100)	NOT NULL,
	`file_name`	varchar(100)	NULL,
	`file_list`	text	NULL
);

ALTER TABLE `attach_file` ADD CONSTRAINT `PK_ATTACH_FILE` PRIMARY KEY (
	`attach_file_id`
);

CREATE TABLE `event_file` (
	`event_file_id`	varchar(100)	NOT NULL,
	`event_key`	varchar(100)	NOT NULL,
	`file_name`	varchar(100)	NULL,
	`file_list`	text	NULL
);

ALTER TABLE `event_file` ADD CONSTRAINT `PK_EVENT_FILE` PRIMARY KEY (
	`event_file_id`
);

drop table event;

CREATE TABLE `event` (
	`event_key`	varchar(100)	NOT NULL,
	`station_number`	varchar(100)	NOT NULL,
	`plus_point`	int	NULL,
	`event_name`	text	NOT NULL,
	`event_content`	text	NOT NULL,
	`start_dt`	datetime	NULL,
	`end_dt`	datetime	NULL,
	`create_dt`	datetime	NOT NULL,
	`state`	char(2)	NOT NULL	DEFAULT 'A'	COMMENT '활성:A
비활성:D'
);
ALTER TABLE `event` ADD CONSTRAINT `PK_EVENT` PRIMARY KEY (
	`event_key`
);


-- 포인트 컬럼 변경
ALTER TABLE purchase
RENAME COLUMN point_key TO used_point_key;

alter table purchase Modify used_point_key BIGINT NOT NULL;
alter table used_point modify used_point_key BIGINT NOT NULL;

-- rental 변경
SHOW COLUMNS FROM purchase;

SELECT COLUMN_NAME, IS_NULLABLE
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'purchase' AND COLUMN_NAME = 'used_point_key';


alter table rental modify rental_key BIGINT NOT NULL;
alter table point modify rental_key BIGINT NOT NULL;


ALTER TABLE purchase
MODIFY COLUMN used_point_key BIGINT NULL;


drop table used_point;

CREATE TABLE `used_point` (
	`used_point_key`	BIGINT	NOT NULL,
	`member_id`	varchar(100)	NOT NULL,
	`point_use_date`	datetime	NOT NULL,
	`point_decrease`	int	NOT NULL
);
ALTER TABLE `used_point` ADD CONSTRAINT `PK_USED_POINT` PRIMARY KEY (
	`used_point_key`
);



ALTER TABLE point DROP FOREIGN KEY FK_rental_TO_point_1;
drop table rental;

CREATE TABLE `rental` (
	`rental_key`	BIGINT	NOT NULL,
	`member_id`	varchar(100)	NOT NULL,
	`bicycle_number`	varchar(100)	NOT NULL,
	`station_number`	varchar(100)	NOT NULL	COMMENT '대여한 대여소 정보',
	`rental_date`	datetime	NOT NULL,
	`return_date`	datetime	NULL,
	`return_state`	char(3)	NOT NULL	DEFAULT 'NR'	COMMENT '미반납:NR
반납:R',
	`return_station_number`	varchar(30)	NULL	COMMENT '대여소정보 table의 대여소 번호 저장',
	`rental_charge`	int	NULL
);
ALTER TABLE `rental` ADD CONSTRAINT `PK_RENTAL` PRIMARY KEY (
	`rental_key`
);


drop table point;
SHOW COLUMNS FROM point;
CREATE TABLE `point` (
	`point_key`	BIGINT	NOT NULL,
	`rental_key`	BIGINT	NOT NULL,
	`member_id`	varchar(100)	NOT NULL,
	`plus_point`	int	NULL,
	`create_dt`	datetime	NULL
);

ALTER TABLE `point` ADD CONSTRAINT `PK_POINT` PRIMARY KEY (
	`point_key`,
	`rental_key`
);

ALTER TABLE `point` ADD CONSTRAINT `FK_rental_TO_point_1` FOREIGN KEY (
	`rental_key`
)
REFERENCES `rental` (
	`rental_key`
);

ALTER TABLE purchase
MODIFY COLUMN pay_type varchar(30);

ALTER TABLE purchase
MODIFY COLUMN purchase_division varchar(10);

ALTER TABLE used_point
MODIFY COLUMN used_point_key BIGINT AUTO_INCREMENT;


-------------------------------------------------------------------------------------


-- dml
select * from station_group_bicycle;
select * from member;
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'greenaoura';
select * from reservation;
-- type 조회
select bicycle_type, COUNT(*), op_type, count(op_type) as opCount
from station_group_bicycle
where station_number= "301"
group by bicycle_type, op_type ;
 

delete from reservation;
update station_group_bicycle s set s.state = 'A';

select * from member;

-- 상태가 A인것(사용가능)중에 첫번째꺼 조회
update station_group_bicycle s set s.state = 'R'
where s.bicycle_number in (
select * from
	(SELECT b.bicycle_number
	FROM station_group_bicycle b 
	WHERE b.state = 'A' and b.station_number = '301' limit 1
	)as tmp
);






-- 포인트 관련 insert문
INSERT INTO rental (rental_key, member_id, bicycle_number, station_number, rental_date, return_state,create_dt)
VALUES ("2", "m001","1234","326", NOW(), 'RN',NOW());

insert INTO point VALUES ("1", "2", "m001", 12, NOW());




-------------------------------------------------------------------
SELECT station_name, station_lat, station_log,
       (6371000 * acos(
           cos(radians(37.3595704)) * cos(radians(station_lat)) * cos(radians(station_log) - radians(127.105399)) + 
           sin(radians(37.3595704)) * sin(radians(station_lat))
       )) AS distance
FROM station_info
HAVING distance <= 300
ORDER BY distance;
 A     2017-06-20          서울특별시 성북구 동소문로 1 한성대입구역6번출구 뒤        37.58876419 127.0063095  한성대입구역6번출구 뒤                  1302


select * from station_info;


DELETE FROM station_info;
delete from station_group_b
DROP TABLE BOARD_GROUP




    
--  북마크조회
delete from board;

drop table board;

CREATE TABLE `board` (
	`board_key`	varchar(100)	NOT NULL,
	`member_id`	varchar(100)	NOT NULL	COMMENT '작성자',
	`category`	varchar(100)	NULL	COMMENT '문의사항: 문의사항, 이벤트: 이벤트, 공지사항: 공지사항',
	`title`	text	NOT NULL,
	`sub`	varchar(100)	NULL,
	`contents`	text	NULL,
	`file_path`	varchar(255)	NULL,
	`create_dt`	datetime	NOT NULL,
	`update_dt`	datetime	NULL,
	`secret`	char(2)	NULL	COMMENT 'Y: 비공개, N: 공개'
);

ALTER TABLE `board` ADD CONSTRAINT `PK_BOARD` PRIMARY KEY (
	`board_key`
);

select * from board;

INSERT INTO board 
(board_key, member_id, category, title, sub, contents, file_path, create_dt, update_dt, secret) 
VALUES

("3", "m001", "공지사항", "안녕하세요3", NULL, "안녕하세요!3", NULL, NOW(), NULL, 'N'),
("4", "m001", "공지사항", "안녕하세요4", NULL, "안녕하세요!4", NULL, NOW(), NULL, 'N'),
("5", "m001", "공지사항", "안녕하세요5", NULL, "안녕하세요!5", NULL, NOW(), NULL, 'N'),
("6", "m001", "공지사항", "안녕하세요6", NULL, "안녕하세요!6", NULL, NOW(), NULL, 'N');
----
select * from board;
select * from board where category = "공지사항";

select * from event;


drop table notification;

CREATE TABLE `notification` (
	`noti_key`	BIGINT	NOT NULL,
	`member_id`	varchar(100)	NOT NULL	COMMENT '받는사람',
	`content`	text	NULL,
	`state`	varchar(10)	NOT NULL	DEFAULT 'NR'	COMMENT '읽음:R
안읽음:NR',
	`title`	varchar(50)	NULL,
	`sender`	varchar(50)	NOT NULL,
	`create_dt`	datetime	NOT NULL
);
ALTER TABLE notification MODIFY content TEXT;
SHOW CREATE TABLE rental;
ALTER TABLE `notification` ADD CONSTRAINT `PK_NOTIFICATION` PRIMARY KEY (
	`noti_key`,
	`member_id`
);

SHOW INDEX FROM rental;
ALTER TABLE `rental` ADD CONSTRAINT `PK_RENTAL` PRIMARY KEY (
	`rental_key`
);

ALTER TABLE `point` ADD CONSTRAINT `FK_rental_TO_point_1` FOREIGN KEY (
	`rental_key`
)
REFERENCES `rental` (
	`rental_key`
);
ALTER TABLE notification MODIFY title TEXT NULL;
INSERT INTO notification (noti_key, member_id, content, state, title, sender, create_dt) 
VALUES (1, "m001", "과금입니다.", 'NR' , "테스트 알림", "admin", NOW());
insert into notification values(2,"m001","과금입니다2.","NR","title","성시우",NOW());
insert into notification values(3,"m001","과금입니다3.","NR","title","성시우",NOW());
insert into notification values(4,"m001","과금입니다4.","R","title","성시우",NOW());
insert into notification values(5,"m003","과금입니다5.","NR","title","성시우",NOW());
insert into notification values(6,"m001","과금입니다4.","R","title","성시우",NOW());
insert into notification values(7,"m001","과금입니다4.","R","title","성시우",NOW());
insert into notification values(8,"m001","과금입니다8.","NR","title","성시우",NOW());
insert into notification values(9,"m001","과금입니다9.","NR","title9","성시우",NOW());
<<<<<<< HEAD
insert into notification values(10,"m001","과금입니다10.","NR","title9","성시우",NOW());
=======
insert into notification values(10,"m001","과금입니다10.","NR","title9","성시우",NOW());



CREATE TABLE `qr` (
	`qr_id`	BIGINT	NOT NULL,
	`rev_key`	BIGINT	NULL,
	`rental_key`	BIGINT	NULL,
	`url`	varchar(255)	NOT NULL,
	`create_dt`	timestamp	NOT NULL,
	`state`	char(1)	NULL	DEFAULT 'A'	COMMENT 'D: 삭제
A:활성'
);

ALTER TABLE `qr` ADD CONSTRAINT `PK_QR` PRIMARY KEY (
	`qr_id`
);

ALTER TABLE reservation 
MODIFY rev_key INT AUTO_INCREMENT;


ALTER TABLE notification
MODIFY COLUMN noti_key BIGINT AUTO_INCREMENT;

ALTER TABLE purchase
MODIFY COLUMN purchase_key BIGINT AUTO_INCREMENT;

ALTER TABLE point
ADD CONSTRAINT FK_rental_TO_point_1 FOREIGN KEY (rental_key) REFERENCES rental(rental_key);
ALTER TABLE rental MODIFY rental_key BIGINT;

select * from rental;

SELECT 
    CONSTRAINT_NAME, 
    TABLE_NAME, 
    COLUMN_NAME, 
    REFERENCED_TABLE_NAME, 
    REFERENCED_COLUMN_NAME
FROM 
    INFORMATION_SCHEMA.KEY_COLUMN_USAGE
WHERE 
    TABLE_SCHEMA = 'greenauroa' 
    AND REFERENCED_TABLE_NAME IS NOT NULL;

     FK_rental_TO_point_1                       point                 rental_key     rental                rental_key

    
    
ALTER TABLE point DROP FOREIGN KEY FK_rental_TO_point_1;
select * from point;
select * from rental;
select * from purchase;
select * from reservation;
select * from station_group_bicycle;


delete from rental;
delete from reservation;
update rental set rental_charge = null where rental_key = 6;
select * from notification;

ALTER TABLE point 
MODIFY point_key INT AUTO_INCREMENT;